# üö¶ Traffic Sentinel - Driving Smarter Roads with IoT Traffic Monitoring üåê

<img width="300px" align="left" src="./doc/logo.PNG" />

üö¶ Traffic Sentinel drives the future of traffic monitoring with a scalable IoT-powered system. Seamlessly processing live feeds from IP cameras, this cutting-edge solution employs YOLO (You Only Look Once) for intelligent vehicle detection, offering real-time insights into dynamic traffic patterns on roads.

üîç Leveraging the power of Fog nodes, Traffic Sentinel ensures swift intermediate processing, optimizing the flow of data. Apache Flink takes the wheel for efficient data processing, while Redis steps in for caching and seamless session management. The communication highway between nodes is orchestrated through the agile MQTT protocol, ensuring a synchronized and responsive traffic monitoring experience.

üåê Unleash the potential of Traffic Sentinel as it transforms data streams into actionable intelligence, paving the way for smarter and safer roadways.

<p align="center">
  <img src="https://img.shields.io/badge/flask-%23000.svg?style=for-the-badge&logo=flask&logoColor=white" />
  <img src="https://img.shields.io/badge/Apache_Kafka-231F20?style=for-the-badge&logo=apache-kafka&logoColor=white" />
  <img src="https://img.shields.io/badge/Docker-2CA5E0?style=for-the-badge&logo=docker&logoColor=white" />
  <img src="https://img.shields.io/badge/JWT-000000?style=for-the-badge&logo=JSON%20web%20tokens&logoColor=white" />
  <img src="https://img.shields.io/badge/pypi-3775A9?style=for-the-badge&logo=pypi&logoColor=white" />
  <img src="https://img.shields.io/badge/OpenCV-27338e?style=for-the-badge&logo=OpenCV&logoColor=white" />
  <img src="https://img.shields.io/badge/VSCode-0078D4?style=for-the-badge&logo=visual%20studio%20code&logoColor=white" />
  <img src="https://img.shields.io/badge/Python-FFD43B?style=for-the-badge&logo=python&logoColor=blue" />
  <img src="https://img.shields.io/badge/Apache Flink-D22128?style=for-the-badge&logo=Apache&logoColor=white" />
  <img src="https://img.shields.io/badge/gunicorn-%298729.svg?style=for-the-badge&logo=gunicorn&logoColor=white" />
  <img src="https://img.shields.io/badge/redis-%23DD0031.svg?style=for-the-badge&logo=redis&logoColor=white" />
  <img src="https://img.shields.io/badge/MongoDB-%234ea94b.svg?style=for-the-badge&logo=mongodb&logoColor=white" />
  <img src="https://img.shields.io/badge/PyTorch-EE4C2C?style=for-the-badge&logo=pytorch&logoColor=white" />
</p>


## Introduction

Traffic congestion and road safety are critical concerns in modern urban environments. Traffic Sentinel addresses these challenges by providing a comprehensive IoT-based traffic monitoring solution. The system collects video streams from IP cameras deployed on roads and uses machine learning techniques to detect and track vehicles in real time. This data is then processed and analyzed to provide insights into traffic flow, congestion, and potential safety issues.


## Services Foundation Layer
The Services Foundation Layer forms the bedrock of our system architecture, providing the essential infrastructure and core functionalities that support the entire ecosystem. This layer encompasses foundational components such as Kafka, Mosquitto, MongoDB, Vault, Redis, and other essential building blocks. It establishes the fundamental communication, data storage, security, and orchestration mechanisms that serve as the backbone for the entire solution. Services at this level handle critical tasks such as message queuing, data persistence, authentication, authorization, and secret management. The Services Foundation Layer ensures reliability, security, and scalability across the entire platform, serving as the base upon which subsequent layers are built.

## Framework-Extended Services Layer
The Framework-Extended Services Layer builds upon the strong foundation provided by the Services Foundation Layer. This layer extends the core capabilities by introducing specialized frameworks and advanced services that address specific application requirements. Apache Flink, a powerful real-time data processing framework, is a prime example of a component within this layer. Other services that enable complex stream processing, analytics, and data transformations also reside here. The Framework-Extended Services Layer adds a layer of sophistication to the system, offering advanced tools for analyzing, processing, and deriving insights from data streams. These services enrich the capabilities of the foundational layer, catering to intricate business needs and data processing scenarios.

## Fog Stream Processing Nodes Layer
The Fog Stream Processing Nodes Layer encapsulates the nodes within our edge computing architecture that specialize in real-time stream processing of data generated by IP cameras. These nodes are strategically positioned at the network's edge, close to the data sources, to minimize latency and optimize data processing efficiency. In this layer, the streaming data from IP cameras is ingested, analyzed, and transformed in real time to extract valuable insights. These nodes play a pivotal role in ensuring rapid and efficient data processing, enabling immediate responses to changing conditions or events captured by the cameras. By processing the streams at the edge, the Fog Stream Processing Nodes Layer enhances the overall system's performance, responsiveness, and ability to make data-driven decisions in time-critical scenarios.

## Architecture Overview

Traffic Sentinel's architecture is designed to handle the complexities of real-time traffic data processing. It consists of the following key components:

- **Fog Nodes**: Intermediate processing nodes placed strategically to preprocess data from IP cameras, reducing the load on central servers.
- **Apache Flink**: A stream processing framework used for real-time data analysis, enabling tasks like vehicle detection using YOLO.
- **Redis**: A caching and session management tool used for storing temporary data, such as authentication sessions.
- **MQTT**: A lightweight messaging protocol used for communication between Fog nodes and central servers.

## Technologies Used

- **Python**: The main programming language used for developing various components of the system.
- **Flask**: A lightweight web framework used for building the provisioning service that provides camera information to Fog nodes.
- **MongoDB**: A NoSQL database used for storing camera information associated with MAC addresses of Fog nodes.
- **Redis**: An in-memory data store used for caching and session management.
- **Apache Flink**: A stream processing framework for real-time data analysis.
- **YOLO (You Only Look Once)**: A deep learning-based object detection model used for vehicle detection in video streams.
- **MQTT**: A lightweight messaging protocol for communication between Fog nodes and central servers.

## Components

The Traffic Sentinel system comprises the following components:

- **Fog Node**: Responsible for intermediate data processing and communication with IP cameras, Apache Flink, and central servers.
- **Provisioning Service**: A Flask-based web service that provides camera information to Fog nodes based on MAC addresses.
- **Apache Flink Jobs**: Real-time data processing tasks for vehicle detection using the YOLO model.
- **Redis Cache**: Used for caching authentication sessions and other temporary data.
- **MongoDB Database**: Stores camera information associated with MAC addresses.

![Screenshot 1](doc/screenshots/screenshot_1.PNG)
![Screenshot 2](doc/screenshots/screenshot_2.PNG)
![Screenshot 3](doc/screenshots/screenshot_3.PNG)
![Screenshot 4](doc/screenshots/screenshot_4.PNG)
![Screenshot 5](doc/screenshots/screenshot_5.PNG)
![Screenshot 12](doc/screenshots/screenshot_12.PNG)
![Screenshot 13](doc/screenshots/screenshot_13.PNG)
![Screenshot 6](doc/screenshots/screenshot_6.PNG)
![Screenshot 7](doc/screenshots/screenshot_7.PNG)
![Screenshot 8](doc/screenshots/screenshot_8.PNG)
![Screenshot 9](doc/screenshots/screenshot_9.PNG)

![Screenshot 10](doc/screenshots/screenshot_10.PNG)
![Screenshot 11](doc/screenshots/screenshot_11.PNG)
![Screenshot 12](doc/screenshots/screenshot_15.PNG)
## Contributing

Contributions are welcome! If you'd like to contribute to Traffic Sentinel, please follow the guidelines in [CONTRIBUTING.md](CONTRIBUTING.md).

## License

This project is licensed under the [MIT License](LICENSE).

---

## Credits

Traffic Sentinel is developed and maintained by Sergio S√°nchez S√°nchez. Special thanks to the open-source community and the contributors who have made this project possible.

---

